name: tests
on: [push, workflow_dispatch]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Building
      run: |
           sudo apt-get upgrade python3
           pip install --no-cache-dir --upgrade -r ./report-generator/requirements.txt
           pip install pytest
    - uses: actions/checkout@v2
    - name: Install redis
      run: sudo apt-get install -y redis-tools redis-server
    - name: Verify that redis is up
      run: redis-cli ping
    - name: start server
      run: |
           cd ./report-generator
           pytest ./tests/test.py
